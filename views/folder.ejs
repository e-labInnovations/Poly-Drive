<!DOCTYPE html>
<html lang="en">
<head>
 <% include partials/head %> 
</head>
<body>
<% include partials/menu %>

<section>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card-box">
                    <div class="row">
                        <div class="col-lg-6 col-xl-6">
                            <h4 class="header-title m-b-30"><a href="<%= data.data.parent == '1_j4kZU9ONrX6Bs02hul4DLLJh-s-JcBl'? '/': '/folder/' + data.data.parent %>"><i class="fa fa-arrow-left"></i></a> <%= data.data.name %></h4>
                        </div>
                    </div>

                    <div class="row">
                        <% data.data.children.forEach(function(file){ %>
                            <div class="col-6 col-md-4 col-lg-3 col-xl-2">
                                <a href="<%= file.type == 'folder'? ('/folder/' + file.id)  : '' %>"  <%= file.type == 'file' && `data-toggle=modal data-target=#modal-${file.id}` %>>
                                    <div class="file-man-box">
                                        <div class="file-img-box"><img src="<%= file.iconlink %>" alt="icon"></div>
                                        <div class="file-man-title">
                                            <h5 class="mb-0 text-overflow"><%= file.name %></h5>
                                            <p class="mb-0"><small><%= file.size == '0 Byte'? (file.children? file.children.length + ' Items':'0 Byte'):file.size %></small></p>
                                        </div>
                                    </div>
                                </a>
                            
                            <% if (file.type == 'file') { %>
                              <%-include("partials/file-details-modal", {fileData: file})  %>
                            <% } %>
                            </div>
                            
                            
                        <% }); %>
    
                    </div>
                </div>
            </div>
            <!-- end col -->
            
        </div>
        <!-- end row -->
    </div>
    <!-- container -->

    
</section>

<% include partials/footer %>
<% include partials/script %>

<script>
  const files = <%- JSON.stringify(data.data.children.filter(file => file.type == 'file')) %>;
</script>
</html>